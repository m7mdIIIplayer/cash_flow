<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
<meta charset="UTF-8">
<title>ğŸ’° CASH FLOW - Wheel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">

<style>
    body {
        margin: 0;
        font-family: "Cairo", sans-serif;
        background-image: url("luckback.jpg");
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        overflow: hidden;
        color: #fff;

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    /* Ø§Ù„Ø¹Ø¬Ù„Ø© */
    #wheelContainer {
        position: relative;
        width: 330px;
        height: 330px;
    }

    #wheelCanvas {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 8px solid gold;
        box-shadow: 0 0 25px gold, 0 0 50px orange inset;
        transition: transform 6s cubic-bezier(0.33, 1, 0.68, 1);
    }

    /* Ø§Ù„Ù…Ø¤Ø´Ø± = Ù†Ù‚Ø·Ø© Ø³ÙˆØ¯Ø§Ø¡ ÙÙ‚Ø· */
    #pointer {
        position: absolute;
        top: 50%;
        right: -18px;
        transform: translateY(-50%);
        width: 14px;
        height: 14px;
        background: black;
        border-radius: 50%;
        box-shadow: 0 0 6px #000;
        z-index: 9999;
    }

    #result {
        margin-top: 15px;
        font-size: 24px;
        font-weight: bold;
        color: gold;
        text-shadow: 0 0 12px gold;
    }

    #footerText {
        position: absolute;
        bottom: 25px;
        font-size: 30px;
        color: gold;
        letter-spacing: 3px;
        text-shadow: 0 0 15px gold, 0 0 25px orange;
    }

    /* Ø§Ù„Ù†Ø§Ø± */
    .fireEffect {
        animation: fireGlow 1s infinite alternate;
    }

    @keyframes fireGlow {
        from { filter: drop-shadow(0 0 12px #ff6600); }
        to   { filter: drop-shadow(0 0 25px #ff3300); }
    }
</style>
</head>

<body>

<div id="wheelContainer">
    <canvas id="wheelCanvas"></canvas>
    <div id="pointer"></div>
</div>

<div id="result">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¶ÙŠØ±...</div>

<div id="footerText">ğŸ’° CASH FLOW</div>

<!-- ØµÙˆØª Ø§Ù„ØªØ¯ÙˆÙŠØ± -->
<audio id="spinSound" src="https://cdn.pixabay.com/download/audio/2023/02/28/audio_91be71e4f8.mp3?filename=wheel-spin-14288.mp3"></audio>

<!-- ØµÙˆØª Ø§Ù„ÙÙˆØ² -->
<audio id="winSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_41a0d6edbe.mp3?filename=win-celebration-121114.mp3"></audio>

<script>
const prizes = [
    "5000",
    "10000",
    "15000",
    "25000",
    "50000",
    "75000",
    "100000",
    "150000",
    "Free Spin",
    "Good Luck"
];

const colors = [
    "#c49b00", "#8c6e00", "#c49b00", "#8c6e00", "#c49b00",
    "#8c6e00", "#c49b00", "#8c6e00", "#222", "#333"
];

const canvas = document.getElementById("wheelCanvas");
const ctx = canvas.getContext("2d");
canvas.width = 330;
canvas.height = 330;

function drawWheel() {
    const r = canvas.width / 2;
    const arc = (2 * Math.PI) / prizes.length;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let i = 0; i < prizes.length; i++) {
        const angle = i * arc;

        ctx.beginPath();
        ctx.fillStyle = colors[i];
        ctx.moveTo(r, r);
        ctx.arc(r, r, r, angle, angle + arc);
        ctx.fill();

        ctx.save();
        ctx.translate(r, r);
        ctx.rotate(angle + arc / 2);
        ctx.fillStyle = "#fff";
        ctx.font = "16px Cairo";
        ctx.textAlign = "center";
        ctx.fillText(prizes[i], r - 50, 5);
        ctx.restore();
    }
}
drawWheel();

// result from link
const params = new URLSearchParams(window.location.search);
const resultValue = params.get("result");

let spinning = false;

function spinToPrize() {
    if (spinning) return;
    spinning = true;

    document.getElementById("spinSound").play();

    let prizeIndex = prizes.indexOf(resultValue);
    if (prizeIndex === -1) prizeIndex = 0;

    const sliceDeg = 360 / prizes.length;
    const stopAngle = (360 * 6) + (360 - (prizeIndex * sliceDeg + sliceDeg / 2));

    canvas.style.transform = `rotate(${stopAngle}deg)`;
    canvas.classList.add("fireEffect");

    setTimeout(() => {
        document.getElementById("winSound").play();

        if (resultValue === "Good Luck") {
            document.getElementById("result").innerHTML = "ğŸ˜¢ Ø­Ø¸ Ø£ÙˆÙØ±!";
        } else if (resultValue === "Free Spin") {
            document.getElementById("result").innerHTML = "ğŸ Ø¯ÙˆØ±Ø§Ù† Ù…Ø¬Ø§Ù†ÙŠ!";
        } else {
            document.getElementById("result").innerHTML = `ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø±Ø¨Ø­Øª <b>${resultValue}</b>`;
        }

        canvas.classList.remove("fireEffect");
    }, 6000);
}

// auto spin
setTimeout(spinToPrize, 1000);
</script>

</body>
</html>
